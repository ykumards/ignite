


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ignite.metrics &mdash; ignite master documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://pytorch.org/ignite/index.htmlmetrics.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="_static/css/ignite_theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ignite.exceptions" href="exceptions.html" />
    <link rel="prev" title="ignite.handlers" href="handlers.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

  <!-- Preload the theme fonts -->

<link rel="preload" href="_static/fonts/FreightSans/freight-sans-book.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium-italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Preload the katex fonts -->

<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Caligraphic-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://pytorch.org/ignite/" aria-label="PyTorch"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="concepts.html">Concepts</a>
          </li>

          <li>
            <a href="quickstart.html">Quickstart</a>
          </li>

          <li>
            <a href="examples.html">Examples</a>
          </li>

          <li>
            <a href="faq.html">FAQ</a>
          </li>

          <li>
            <a href="https://github.com/pytorch/ignite">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>


<body class="pytorch-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
                <div class="version">
                  0.3.0
                </div>
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">Package Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="engine.html">ignite.engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="handlers.html">ignite.handlers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ignite.metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">ignite.exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">ignite.utils</a></li>
</ul>
<p class="caption"><span class="caption-text">Contrib Package Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contrib/engines.html">ignite.contrib.engines</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib/metrics.html">ignite.contrib.metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib/handlers.html">ignite.contrib.handlers</a></li>
</ul>

            
          
        </div>
      </div>

      <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: v0.3.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../v0.1.0/metrics.html">v0.1.0</a></dd>
            <dd><a href="../v0.1.1/metrics.html">v0.1.1</a></dd>
            <dd><a href="../v0.1.2/metrics.html">v0.1.2</a></dd>
            <dd><a href="../v0.2.0/metrics.html">v0.2.0</a></dd>
            <dd><a href="../v0.2.1/metrics.html">v0.2.1</a></dd>
            <dd><a href="metrics.html">v0.3.0</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../master/metrics.html">master</a></dd>
        </dl>
    </div>
</div>

    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
      <li>ignite.metrics</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
            <a href="_sources/metrics.rst.txt" rel="nofollow"><img src="_static/images/view-page-source-icon.svg"></a>
          
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">

        
          
          <div class="rst-content">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  <div class="section" id="ignite-metrics">
<h1>ignite.metrics<a class="headerlink" href="#ignite-metrics" title="Permalink to this headline">¶</a></h1>
<p>Metrics provide a way to compute various quantities of interest in an online
fashion without having to store the entire output history of a model.</p>
<p>In practice a user needs to attach the metric instance to an engine. The metric
value is then computed using the output of the engine’s <cite>process_function</cite>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_function</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">batch</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">return</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">Engine</span><span class="p">(</span><span class="n">process_function</span><span class="p">)</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">Accuracy</span><span class="p">()</span>
<span class="n">metric</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;accuracy&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the engine’s output is not in the format <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y, …}</cite>, the user can
use the <cite>output_transform</cite> argument to transform it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_function</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">batch</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;y_pred&#39;</span><span class="p">:</span> <span class="n">y_pred</span><span class="p">,</span> <span class="s1">&#39;y_true&#39;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">Engine</span><span class="p">(</span><span class="n">process_function</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">output_transform</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="c1"># `output` variable is returned by above `process_function`</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;y_pred&#39;</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;y_true&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span>  <span class="c1"># output format is according to `Accuracy` docs</span>

<span class="n">metric</span> <span class="o">=</span> <span class="n">Accuracy</span><span class="p">(</span><span class="n">output_transform</span><span class="o">=</span><span class="n">output_transform</span><span class="p">)</span>
<span class="n">metric</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;accuracy&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Most of implemented metrics are adapted to distributed computations and reduce their internal states across the GPUs
before computing metric value. This can be helpful to run the evaluation on multiple nodes/GPU instances with a
distributed data sampler. Following code snippet shows in detail how to adapt metrics:</p>
<div class="last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="o">=</span> <span class="s2">&quot;cuda:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">local_rank</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">parallel</span><span class="o">.</span><span class="n">DistributedDataParallel</span><span class="p">(</span><span class="n">model</span><span class="p">,</span>
                                                  <span class="n">device_ids</span><span class="o">=</span><span class="p">[</span><span class="n">local_rank</span><span class="p">,</span> <span class="p">],</span>
                                                  <span class="n">output_device</span><span class="o">=</span><span class="n">local_rank</span><span class="p">)</span>
<span class="n">test_sampler</span> <span class="o">=</span> <span class="n">DistributedSampler</span><span class="p">(</span><span class="n">test_dataset</span><span class="p">)</span>
<span class="n">test_loader</span> <span class="o">=</span> <span class="n">DataLoader</span><span class="p">(</span><span class="n">test_dataset</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">batch_size</span><span class="p">,</span> <span class="n">sampler</span><span class="o">=</span><span class="n">test_sampler</span><span class="p">,</span>
                         <span class="n">num_workers</span><span class="o">=</span><span class="n">num_workers</span><span class="p">,</span> <span class="n">pin_memory</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">evaluator</span> <span class="o">=</span> <span class="n">create_supervised_evaluator</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;accuracy&#39;</span><span class="p">:</span> <span class="n">Accuracy</span><span class="p">(</span><span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)},</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="metric-arithmetics">
<h2>Metric arithmetics<a class="headerlink" href="#metric-arithmetics" title="Permalink to this headline">¶</a></h2>
<p>Metrics could be combined together to form new metrics. This could be done through arithmetics, such
as <code class="docutils literal notranslate"><span class="pre">metric1</span> <span class="pre">+</span> <span class="pre">metric2</span></code>, use PyTorch operators, such as <code class="docutils literal notranslate"><span class="pre">(metric1</span> <span class="pre">+</span> <span class="pre">metric2).pow(2).mean()</span></code>,
or use a lambda function, such as <code class="docutils literal notranslate"><span class="pre">MetricsLambda(lambda</span> <span class="pre">a,</span> <span class="pre">b:</span> <span class="pre">torch.mean(a</span> <span class="pre">+</span> <span class="pre">b),</span> <span class="pre">metric1,</span> <span class="pre">metric2)</span></code>.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">precision</span> <span class="o">=</span> <span class="n">Precision</span><span class="p">(</span><span class="n">average</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">recall</span> <span class="o">=</span> <span class="n">Recall</span><span class="p">(</span><span class="n">average</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">F1</span> <span class="o">=</span> <span class="p">(</span><span class="n">precision</span> <span class="o">*</span> <span class="n">recall</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">precision</span> <span class="o">+</span> <span class="n">recall</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This example computes the mean of F1 across classes. To combine
precision and recall to get F1 or other F metrics, we have to be careful
that <cite>average=False</cite>, i.e. to use the unaveraged precision and recall,
otherwise we will not be computing F-beta metrics.</p>
</div>
<p>Metrics also support indexing operation (if metric’s result is a vector/matrix/tensor). For example, this can be useful to compute mean metric (e.g. precision, recall or IoU) ignoring the background:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cm</span> <span class="o">=</span> <span class="n">ConfusionMatrix</span><span class="p">(</span><span class="n">num_classes</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">iou_metric</span> <span class="o">=</span> <span class="n">IoU</span><span class="p">(</span><span class="n">cm</span><span class="p">)</span>
<span class="n">iou_no_bg_metric</span> <span class="o">=</span> <span class="n">iou_metric</span><span class="p">[:</span><span class="mi">9</span><span class="p">]</span>  <span class="c1"># We assume that the background index is 9</span>
<span class="n">mean_iou_no_bg_metric</span> <span class="o">=</span> <span class="n">iou_no_bg_metric</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="c1"># mean_iou_no_bg_metric.compute() -&gt; tensor(0.12345)</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-create-a-custom-metric">
<h2>How to create a custom metric<a class="headerlink" href="#how-to-create-a-custom-metric" title="Permalink to this headline">¶</a></h2>
<p>To create a custom metric one needs to create a new class inheriting from <a class="reference internal" href="#ignite.metrics.Metric" title="ignite.metrics.Metric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Metric</span></code></a> and override
three methods :</p>
<ul class="simple">
<li><cite>reset()</cite> : resets internal variables and accumulators</li>
<li><cite>update(output)</cite> : updates internal variables and accumulators with provided batch output <cite>(y_pred, y)</cite></li>
<li><cite>compute()</cite> : computes custom metric and return the result</li>
</ul>
<p>For example, we would like to implement for illustration purposes a multi-class accuracy metric with some
specific condition (e.g. ignore user-defined classes):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ignite.metrics</span> <span class="kn">import</span> <span class="n">Metric</span>
<span class="kn">from</span> <span class="nn">ignite.exceptions</span> <span class="kn">import</span> <span class="n">NotComputableError</span>

<span class="c1"># These decorators helps with distributed settings</span>
<span class="kn">from</span> <span class="nn">ignite.metrics.metric</span> <span class="kn">import</span> <span class="n">sync_all_reduce</span><span class="p">,</span> <span class="n">reinit__is_reduced</span>


<span class="k">class</span> <span class="nc">CustomAccuracy</span><span class="p">(</span><span class="n">Metric</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignored_class</span><span class="p">,</span> <span class="n">output_transform</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignored_class</span> <span class="o">=</span> <span class="n">ignored_class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_correct</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_examples</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CustomAccuracy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">output_transform</span><span class="o">=</span><span class="n">output_transform</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>

    <span class="nd">@reinit__is_reduced</span>
    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_correct</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_examples</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CustomAccuracy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="nd">@reinit__is_reduced</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
        <span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">output</span>

        <span class="n">indices</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignored_class</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="n">indices</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignored_class</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
        <span class="n">correct</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_num_correct</span> <span class="o">+=</span> <span class="n">torch</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">correct</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_examples</span> <span class="o">+=</span> <span class="n">correct</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@sync_all_reduce</span><span class="p">(</span><span class="s2">&quot;_num_examples&quot;</span><span class="p">,</span> <span class="s2">&quot;_num_correct&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_examples</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotComputableError</span><span class="p">(</span><span class="s1">&#39;CustomAccuracy must have at least one example before it can be computed.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_correct</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_examples</span>
</pre></div>
</div>
<p>We imported necessary classes as <a class="reference internal" href="#ignite.metrics.Metric" title="ignite.metrics.Metric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Metric</span></code></a>, <a class="reference internal" href="exceptions.html#ignite.exceptions.NotComputableError" title="ignite.exceptions.NotComputableError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotComputableError</span></code></a> and
decorators to adapt the metric for distributed setting. In <cite>reset</cite> method, we reset internal variables <cite>_num_correct</cite>
and <cite>_num_examples</cite> which are used to compute the custom metric. In <cite>updated</cite> method we define how to update
the internal variables. And finally in <cite>compute</cite> method, we compute metric value.</p>
<p>We can check this implementation in a simple case:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">torch</span>
<span class="n">torch</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">CustomAccuracy</span><span class="p">(</span><span class="n">ignored_class</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="n">batch_size</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">num_classes</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">y_pred</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">batch_size</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">batch_size</span><span class="p">,</span> <span class="p">))</span>

<span class="n">m</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1"># Out: tensor([2, 2, 2, 3]) tensor([2, 1, 0, 0])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">_num_correct</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">_num_examples</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
<span class="c1"># Out: 1 3 0.3333333333333333</span>
</pre></div>
</div>
<div class="section" id="metrics-and-distributed-computations">
<h3>Metrics and distributed computations<a class="headerlink" href="#metrics-and-distributed-computations" title="Permalink to this headline">¶</a></h3>
<p>In the above example, <cite>CustomAccuracy</cite> constructor has <cite>device</cite> argument and <cite>reset</cite>, <cite>update</cite>, <cite>compute</cite> methods are decorated with <cite>reinit__is_reduced</cite>, <cite>sync_all_reduce</cite>. The purpose of these features is to adapt metrics in distributed computations on CUDA devices and assuming the backend to support <a class="reference external" href="https://pytorch.org/docs/stable/distributed.html#torch.distributed.all_reduce">“all_reduce” operation</a>. User can specify the device (by default, <cite>cuda</cite>) at metric’s initialization. This device _can_ be used to store internal variables on and to collect all results from all participating devices. More precisely, in the above example we added <cite>&#64;sync_all_reduce(“_num_examples”, “_num_correct”)</cite> over <cite>compute</cite> method. This means that when <cite>compute</cite> method is called, metric’s interal variables <cite>self._num_examples</cite> and <cite>self._num_correct</cite> are summed up over all participating devices. Therefore, once collected, these internal variables can be used to compute the final metric value.</p>
</div>
</div>
<div class="section" id="complete-list-of-metrics">
<h2>Complete list of metrics<a class="headerlink" href="#complete-list-of-metrics" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#ignite.metrics.Accuracy" title="ignite.metrics.Accuracy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Accuracy</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.Average" title="ignite.metrics.Average"><code class="xref py py-class docutils literal notranslate"><span class="pre">Average</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.ConfusionMatrix" title="ignite.metrics.ConfusionMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfusionMatrix</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.DiceCoefficient" title="ignite.metrics.DiceCoefficient"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DiceCoefficient()</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.EpochMetric" title="ignite.metrics.EpochMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">EpochMetric</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.Fbeta" title="ignite.metrics.Fbeta"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Fbeta()</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.GeometricAverage" title="ignite.metrics.GeometricAverage"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricAverage</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.IoU" title="ignite.metrics.IoU"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IoU()</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.mIoU" title="ignite.metrics.mIoU"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mIoU()</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.Loss" title="ignite.metrics.Loss"><code class="xref py py-class docutils literal notranslate"><span class="pre">Loss</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.MeanAbsoluteError" title="ignite.metrics.MeanAbsoluteError"><code class="xref py py-class docutils literal notranslate"><span class="pre">MeanAbsoluteError</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.MeanPairwiseDistance" title="ignite.metrics.MeanPairwiseDistance"><code class="xref py py-class docutils literal notranslate"><span class="pre">MeanPairwiseDistance</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.MeanSquaredError" title="ignite.metrics.MeanSquaredError"><code class="xref py py-class docutils literal notranslate"><span class="pre">MeanSquaredError</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.Metric" title="ignite.metrics.Metric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Metric</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.MetricsLambda" title="ignite.metrics.MetricsLambda"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetricsLambda</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.Precision" title="ignite.metrics.Precision"><code class="xref py py-class docutils literal notranslate"><span class="pre">Precision</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.Recall" title="ignite.metrics.Recall"><code class="xref py py-class docutils literal notranslate"><span class="pre">Recall</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.RootMeanSquaredError" title="ignite.metrics.RootMeanSquaredError"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootMeanSquaredError</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.RunningAverage" title="ignite.metrics.RunningAverage"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunningAverage</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.TopKCategoricalAccuracy" title="ignite.metrics.TopKCategoricalAccuracy"><code class="xref py py-class docutils literal notranslate"><span class="pre">TopKCategoricalAccuracy</span></code></a></li>
<li><a class="reference internal" href="#ignite.metrics.VariableAccumulation" title="ignite.metrics.VariableAccumulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">VariableAccumulation</span></code></a></li>
</ul>
</div></blockquote>
<dl class="class">
<dt id="ignite.metrics.Accuracy">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">Accuracy</code><span class="sig-paren">(</span><em>output_transform=&lt;function Accuracy.&lt;lambda&gt;&gt;</em>, <em>is_multilabel=False</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/accuracy.html#Accuracy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the accuracy for binary, multiclass and multilabel data.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
<li><cite>y_pred</cite> must be in the following shape (batch_size, num_categories, …) or (batch_size, …).</li>
<li><cite>y</cite> must be in the following shape (batch_size, …).</li>
<li><cite>y</cite> and <cite>y_pred</cite> must be in the following shape of (batch_size, num_categories, …) for multilabel cases.</li>
</ul>
<p>In binary and multilabel cases, the elements of <cite>y</cite> and <cite>y_pred</cite> should have 0 or 1 values. Thresholding of
predictions can be done as below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">thresholded_output_transform</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">output</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span>

<span class="n">binary_accuracy</span> <span class="o">=</span> <span class="n">Accuracy</span><span class="p">(</span><span class="n">thresholded_output_transform</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.</li>
<li><strong>is_multilabel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>optional</em>) – flag to use in multilabel case. By default, False.</li>
<li><strong>device</strong> (<em>str of torch.device</em><em>, </em><em>optional</em>) – device specification in case of distributed computation usage.
In most of the cases, it can be defined as “cuda:local_rank” or “cuda”
if already set <cite>torch.cuda.set_device(local_rank)</cite>. By default, if a distributed process group is
initialized and available, device is set to <cite>cuda</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.Average">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">Average</code><span class="sig-paren">(</span><em>output_transform=&lt;function Average.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/accumulation.html#Average"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Average" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class to compute arithmetic average of a single variable.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>x</cite>.</li>
<li><cite>x</cite> can be a number or <cite>torch.Tensor</cite>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Number of samples is updated following the rule:</p>
<ul class="simple">
<li><cite>+1</cite> if input is a number</li>
<li><cite>+1</cite> if input is a 1D <cite>torch.Tensor</cite></li>
<li><cite>+batch_size</cite> if input is an ND <cite>torch.Tensor</cite>. Batch size is the first dimension (<cite>shape[0]</cite>).</li>
</ul>
<p class="last">For input <cite>x</cite> being an ND <cite>torch.Tensor</cite> with N &gt; 1, the first dimension is seen as the number of samples and
is summed up and added to the accumulator: <cite>accumulator += x.sum(dim=0)</cite></p>
</div>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">evaluator</span> <span class="o">=</span> <span class="o">...</span>

<span class="n">custom_var_mean</span> <span class="o">=</span> <span class="n">Average</span><span class="p">(</span><span class="n">output_transform</span><span class="o">=</span><span class="k">lambda</span> <span class="n">output</span><span class="p">:</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;custom_var&#39;</span><span class="p">])</span>
<span class="n">custom_var_mean</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">evaluator</span><span class="p">,</span> <span class="s1">&#39;mean_custom_var&#39;</span><span class="p">)</span>

<span class="n">state</span> <span class="o">=</span> <span class="n">evaluator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="c1"># state.metrics[&#39;mean_custom_var&#39;] -&gt; average of output[&#39;custom_var&#39;]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.</li>
<li><strong>device</strong> (<em>str of torch.device</em>) – device specification in case of distributed computation usage.
In most of the cases, it should defined as “cuda:local_rank”.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.ConfusionMatrix">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">ConfusionMatrix</code><span class="sig-paren">(</span><em>num_classes</em>, <em>average=None</em>, <em>output_transform=&lt;function ConfusionMatrix.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/confusion_matrix.html#ConfusionMatrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.ConfusionMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates confusion matrix for multi-class data.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
<li><cite>y_pred</cite> must contain logits and has the following shape (batch_size, num_categories, …)</li>
<li><dl class="first docutils">
<dt><cite>y</cite> should have the following shape (batch_size, …) and contains ground-truth class indices</dt>
<dd>with or without the background class. During the computation, argmax of <cite>y_pred</cite> is taken to determine
predicted classes.</dd>
</dl>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>num_classes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – number of classes. See notes for more details.</li>
<li><strong>average</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>optional</em>) – confusion matrix values averaging schema: None, “samples”, “recall”, “precision”.
Default is None. If <cite>average=”samples”</cite> then confusion matrix values are normalized by the number of seen
samples. If <cite>average=”recall”</cite> then confusion matrix values are normalized such that diagonal values
represent class recalls. If <cite>average=”precision”</cite> then confusion matrix values are normalized such that
diagonal values represent class precisions.</li>
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.</li>
<li><strong>device</strong> (<em>str of torch.device</em><em>, </em><em>optional</em>) – device specification in case of distributed computation usage.
In most of the cases, it can be defined as “cuda:local_rank” or “cuda”
if already set <cite>torch.cuda.set_device(local_rank)</cite>. By default, if a distributed process group is
initialized and available, device is set to <cite>cuda</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In case of the targets <cite>y</cite> in <cite>(batch_size, …)</cite> format, target indices between 0 and <cite>num_classes</cite> only
contribute to the confusion matrix and others are neglected. For example, if <cite>num_classes=20</cite> and target index
equal 255 is encountered, then it is filtered out.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="ignite.metrics.DiceCoefficient">
<code class="descclassname">ignite.metrics.</code><code class="descname">DiceCoefficient</code><span class="sig-paren">(</span><em>cm</em>, <em>ignore_index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/confusion_matrix.html#DiceCoefficient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.DiceCoefficient" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates Dice Coefficient for a given <a class="reference internal" href="#ignite.metrics.ConfusionMatrix" title="ignite.metrics.ConfusionMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfusionMatrix</span></code></a> metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cm</strong> (<a class="reference internal" href="#ignite.metrics.ConfusionMatrix" title="ignite.metrics.ConfusionMatrix"><em>ConfusionMatrix</em></a>) – instance of confusion matrix metric</li>
<li><strong>ignore_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – index to ignore, e.g. background index</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.EpochMetric">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">EpochMetric</code><span class="sig-paren">(</span><em>compute_fn</em>, <em>output_transform=&lt;function EpochMetric.&lt;lambda&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/epoch_metric.html#EpochMetric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.EpochMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for metrics that should be computed on the entire output history of a model.
Model’s output and targets are restricted to be of shape <cite>(batch_size, n_classes)</cite>. Output
datatype should be <cite>float32</cite>. Target datatype should be <cite>long</cite>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Current implementation stores all input data (output and target) in as tensors before computing a metric.
This can potentially lead to a memory error if the input data is larger than available RAM.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Current implementation does not work with distributed computations. Results are not gather across all devices
and computed results are valid for a single device only.</p>
</div>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
</ul>
<p>If target shape is <cite>(batch_size, n_classes)</cite> and <cite>n_classes &gt; 1</cite> than it should be binary: e.g. <cite>[[0, 1, 0, 1], ]</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>compute_fn</strong> (<em>callable</em>) – a callable with the signature (<cite>torch.tensor</cite>, <cite>torch.tensor</cite>) takes as the input
<cite>predictions</cite> and <cite>targets</cite> and returns a scalar.</li>
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ignite.metrics.Fbeta">
<code class="descclassname">ignite.metrics.</code><code class="descname">Fbeta</code><span class="sig-paren">(</span><em>beta</em>, <em>average=True</em>, <em>precision=None</em>, <em>recall=None</em>, <em>output_transform=None</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/fbeta.html#Fbeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Fbeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates F-beta score</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>beta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – weight of precision in harmonic mean</li>
<li><strong>average</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>optional</em>) – if True, F-beta score is computed as the unweighted average (across all classes
in multiclass case), otherwise, returns a tensor with F-beta score for each class in multiclass case.</li>
<li><strong>precision</strong> (<a class="reference internal" href="#ignite.metrics.Precision" title="ignite.metrics.Precision"><em>Precision</em></a><em>, </em><em>optional</em>) – precision object metric with <cite>average=False</cite> to compute F-beta score</li>
<li><strong>recall</strong> (<a class="reference internal" href="#ignite.metrics.Precision" title="ignite.metrics.Precision"><em>Precision</em></a><em>, </em><em>optional</em>) – recall object metric with <cite>average=False</cite> to compute F-beta score</li>
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. It is used only if precision or recall are not provided.</li>
<li><strong>device</strong> (<em>str of torch.device</em><em>, </em><em>optional</em>) – device specification in case of distributed computation usage.
In most of the cases, it can be defined as “cuda:local_rank” or “cuda”
if already set <cite>torch.cuda.set_device(local_rank)</cite>. By default, if a distributed process group is
initialized and available, device is set to <cite>cuda</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">MetricsLambda, F-beta metric</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.GeometricAverage">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">GeometricAverage</code><span class="sig-paren">(</span><em>output_transform=&lt;function GeometricAverage.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/accumulation.html#GeometricAverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.GeometricAverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class to compute geometric average of a single variable.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>x</cite>.</li>
<li><cite>x</cite> can be a number or <cite>torch.Tensor</cite>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Number of samples is updated following the rule:</p>
<ul class="simple">
<li><cite>+1</cite> if input is a number</li>
<li><cite>+1</cite> if input is a 1D <cite>torch.Tensor</cite></li>
<li><cite>+batch_size</cite> if input is a ND <cite>torch.Tensor</cite>. Batch size is the first dimension (<cite>shape[0]</cite>).</li>
</ul>
<p class="last">For input <cite>x</cite> being an ND <cite>torch.Tensor</cite> with N &gt; 1, the first dimension is seen as the number of samples and
is aggregated and added to the accumulator: <cite>accumulator *= prod(x, dim=0)</cite></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.</li>
<li><strong>device</strong> (<em>str of torch.device</em>) – device specification in case of distributed computation usage.
In most of the cases, it should defined as “cuda:local_rank”.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ignite.metrics.IoU">
<code class="descclassname">ignite.metrics.</code><code class="descname">IoU</code><span class="sig-paren">(</span><em>cm</em>, <em>ignore_index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/confusion_matrix.html#IoU"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.IoU" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates Intersection over Union using <a class="reference internal" href="#ignite.metrics.ConfusionMatrix" title="ignite.metrics.ConfusionMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfusionMatrix</span></code></a> metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cm</strong> (<a class="reference internal" href="#ignite.metrics.ConfusionMatrix" title="ignite.metrics.ConfusionMatrix"><em>ConfusionMatrix</em></a>) – instance of confusion matrix metric</li>
<li><strong>ignore_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – index to ignore, e.g. background index</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">MetricsLambda</p>
</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">train_evaluator</span> <span class="o">=</span> <span class="o">...</span>

<span class="n">cm</span> <span class="o">=</span> <span class="n">ConfusionMatrix</span><span class="p">(</span><span class="n">num_classes</span><span class="o">=</span><span class="n">num_classes</span><span class="p">)</span>
<span class="n">IoU</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">train_evaluator</span><span class="p">,</span> <span class="s1">&#39;IoU&#39;</span><span class="p">)</span>

<span class="n">state</span> <span class="o">=</span> <span class="n">train_evaluator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">train_dataset</span><span class="p">)</span>
<span class="c1"># state.metrics[&#39;IoU&#39;] -&gt; tensor of shape (num_classes - 1, )</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ignite.metrics.mIoU">
<code class="descclassname">ignite.metrics.</code><code class="descname">mIoU</code><span class="sig-paren">(</span><em>cm</em>, <em>ignore_index=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/confusion_matrix.html#mIoU"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.mIoU" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates mean Intersection over Union using <a class="reference internal" href="#ignite.metrics.ConfusionMatrix" title="ignite.metrics.ConfusionMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfusionMatrix</span></code></a> metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cm</strong> (<a class="reference internal" href="#ignite.metrics.ConfusionMatrix" title="ignite.metrics.ConfusionMatrix"><em>ConfusionMatrix</em></a>) – instance of confusion matrix metric</li>
<li><strong>ignore_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) – index to ignore, e.g. background index</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">MetricsLambda</p>
</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">train_evaluator</span> <span class="o">=</span> <span class="o">...</span>

<span class="n">cm</span> <span class="o">=</span> <span class="n">ConfusionMatrix</span><span class="p">(</span><span class="n">num_classes</span><span class="o">=</span><span class="n">num_classes</span><span class="p">)</span>
<span class="n">mIoU</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">train_evaluator</span><span class="p">,</span> <span class="s1">&#39;mean IoU&#39;</span><span class="p">)</span>

<span class="n">state</span> <span class="o">=</span> <span class="n">train_evaluator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">train_dataset</span><span class="p">)</span>
<span class="c1"># state.metrics[&#39;mean IoU&#39;] -&gt; scalar</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.Loss">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">Loss</code><span class="sig-paren">(</span><em>loss_fn</em>, <em>output_transform=&lt;function Loss.&lt;lambda&gt;&gt;</em>, <em>batch_size=&lt;function Loss.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/loss.html#Loss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Loss" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the average loss according to the passed loss_fn.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>loss_fn</strong> (<em>callable</em>) – a callable taking a prediction tensor, a target
tensor, optionally other arguments, and returns the average loss
over all observations in the batch.</li>
<li><strong>output_transform</strong> (<em>callable</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric.
This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.
The output is expected to be a tuple <cite>(prediction, target)</cite> or
(prediction, target, kwargs) where kwargs is a dictionary of extra
keywords arguments. If extra keywords arguments are provided they are passed to <cite>loss_fn</cite>.</li>
<li><strong>batch_size</strong> (<em>callable</em>) – a callable taking a target tensor that returns the
first dimension size (usually the batch size).</li>
<li><strong>device</strong> (<em>str of torch.device</em><em>, </em><em>optional</em>) – device specification in case of distributed computation usage.
In most of the cases, it can be defined as “cuda:local_rank” or “cuda”
if already set <cite>torch.cuda.set_device(local_rank)</cite>. By default, if a distributed process group is
initialized and available, device is set to <cite>cuda</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.MeanAbsoluteError">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">MeanAbsoluteError</code><span class="sig-paren">(</span><em>output_transform=&lt;function Metric.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/mean_absolute_error.html#MeanAbsoluteError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.MeanAbsoluteError" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the mean absolute error.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.MeanPairwiseDistance">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">MeanPairwiseDistance</code><span class="sig-paren">(</span><em>p=2</em>, <em>eps=1e-06</em>, <em>output_transform=&lt;function MeanPairwiseDistance.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/mean_pairwise_distance.html#MeanPairwiseDistance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.MeanPairwiseDistance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the mean pairwise distance: average of pairwise distances computed on provided batches.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.MeanSquaredError">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">MeanSquaredError</code><span class="sig-paren">(</span><em>output_transform=&lt;function Metric.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/mean_squared_error.html#MeanSquaredError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.MeanSquaredError" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the mean squared error.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.Metric">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">Metric</code><span class="sig-paren">(</span><em>output_transform=&lt;function Metric.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/metric.html#Metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all Metrics.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.
By default, metrics require the output as <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
<li><strong>device</strong> (<em>str of torch.device</em><em>, </em><em>optional</em>) – device specification in case of distributed computation usage.
In most of the cases, it can be defined as “cuda:local_rank” or “cuda”
if already set <cite>torch.cuda.set_device(local_rank)</cite>. By default, if a distributed process group is
initialized and available, device is set to <cite>cuda</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ignite.metrics.Metric.compute">
<code class="descname">compute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/metric.html#Metric.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Metric.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the metric based on it’s accumulated state.</p>
<p>This is called at the end of each epoch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the actual quantity of interest.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">Any</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotComputableError</span></code> – raised when the metric cannot be computed.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ignite.metrics.Metric.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/metric.html#Metric.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Metric.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the metric to it’s initial state.</p>
<p>This is called at the start of each epoch.</p>
</dd></dl>

<dl class="method">
<dt id="ignite.metrics.Metric.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>output</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/metric.html#Metric.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Metric.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the metric’s state using the passed batch output.</p>
<p>This is called once for each batch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>output</strong> – the is the output from the engine’s process function.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ignite.metrics.MetricsLambda">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">MetricsLambda</code><span class="sig-paren">(</span><em>f</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/metrics_lambda.html#MetricsLambda"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.MetricsLambda" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a function to other metrics to obtain a new metric.
The result of the new metric is defined to be the result
of applying the function to the result of argument metrics.</p>
<p>When update, this metric does not recursively update the metrics
it depends on. When reset, all its dependency metrics would be
resetted. When attach, all its dependencies would be automatically
attached.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>f</strong> (<em>callable</em>) – the function that defines the computation</li>
<li><strong>args</strong> (<em>sequence</em>) – Sequence of other metrics or something
else that will be fed to <code class="docutils literal notranslate"><span class="pre">f</span></code> as arguments.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">precision</span> <span class="o">=</span> <span class="n">Precision</span><span class="p">(</span><span class="n">average</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">recall</span> <span class="o">=</span> <span class="n">Recall</span><span class="p">(</span><span class="n">average</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">Fbeta</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">beta</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">mean</span><span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="n">beta</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span> <span class="o">*</span> <span class="n">r</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">p</span> <span class="o">+</span> <span class="n">r</span> <span class="o">+</span> <span class="mf">1e-20</span><span class="p">))</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

<span class="n">F1</span> <span class="o">=</span> <span class="n">MetricsLambda</span><span class="p">(</span><span class="n">Fbeta</span><span class="p">,</span> <span class="n">recall</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">F2</span> <span class="o">=</span> <span class="n">MetricsLambda</span><span class="p">(</span><span class="n">Fbeta</span><span class="p">,</span> <span class="n">recall</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">F3</span> <span class="o">=</span> <span class="n">MetricsLambda</span><span class="p">(</span><span class="n">Fbeta</span><span class="p">,</span> <span class="n">recall</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">F4</span> <span class="o">=</span> <span class="n">MetricsLambda</span><span class="p">(</span><span class="n">Fbeta</span><span class="p">,</span> <span class="n">recall</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.Precision">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">Precision</code><span class="sig-paren">(</span><em>output_transform=&lt;function Precision.&lt;lambda&gt;&gt;</em>, <em>average=False</em>, <em>is_multilabel=False</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/precision.html#Precision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Precision" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates precision for binary and multiclass data.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
<li><cite>y_pred</cite> must be in the following shape (batch_size, num_categories, …) or (batch_size, …).</li>
<li><cite>y</cite> must be in the following shape (batch_size, …).</li>
</ul>
<p>In binary and multilabel cases, the elements of <cite>y</cite> and <cite>y_pred</cite> should have 0 or 1 values. Thresholding of
predictions can be done as below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">thresholded_output_transform</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">output</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span>

<span class="n">precision</span> <span class="o">=</span> <span class="n">Precision</span><span class="p">(</span><span class="n">output_transform</span><span class="o">=</span><span class="n">thresholded_output_transform</span><span class="p">)</span>
</pre></div>
</div>
<p>In multilabel cases, average parameter should be True. However, if user would like to compute F1 metric, for
example, average parameter should be False. This can be done as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">precision</span> <span class="o">=</span> <span class="n">Precision</span><span class="p">(</span><span class="n">average</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_multilabel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">recall</span> <span class="o">=</span> <span class="n">Recall</span><span class="p">(</span><span class="n">average</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_multilabel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">F1</span> <span class="o">=</span> <span class="n">precision</span> <span class="o">*</span> <span class="n">recall</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">precision</span> <span class="o">+</span> <span class="n">recall</span> <span class="o">+</span> <span class="mf">1e-20</span><span class="p">)</span>
<span class="n">F1</span> <span class="o">=</span> <span class="n">MetricsLambda</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">(),</span> <span class="n">F1</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In multilabel cases, if average is False, current implementation stores all input data (output and target) in
as tensors before computing a metric. This can potentially lead to a memory error if the input data is larger
than available RAM.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In multilabel cases, if average is False, current implementation does not work with distributed computations.
Results are not reduced across the GPUs. Computed result corresponds to the local rank’s (single GPU) result.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.</li>
<li><strong>average</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>optional</em>) – if True, precision is computed as the unweighted average (across all classes
in multiclass case), otherwise, returns a tensor with the precision (for each class in multiclass case).</li>
<li><strong>is_multilabel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>optional</em>) – parameter should be True and the average is computed across samples, instead of classes.</li>
<li><strong>device</strong> (<em>str of torch.device</em><em>, </em><em>optional</em>) – device specification in case of distributed computation usage.
In most of the cases, it can be defined as “cuda:local_rank” or “cuda”
if already set <cite>torch.cuda.set_device(local_rank)</cite>. By default, if a distributed process group is
initialized and available, device is set to <cite>cuda</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.Recall">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">Recall</code><span class="sig-paren">(</span><em>output_transform=&lt;function Recall.&lt;lambda&gt;&gt;</em>, <em>average=False</em>, <em>is_multilabel=False</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/recall.html#Recall"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.Recall" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates recall for binary and multiclass data.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
<li><cite>y_pred</cite> must be in the following shape (batch_size, num_categories, …) or (batch_size, …).</li>
<li><cite>y</cite> must be in the following shape (batch_size, …).</li>
</ul>
<p>In binary and multilabel cases, the elements of <cite>y</cite> and <cite>y_pred</cite> should have 0 or 1 values. Thresholding of
predictions can be done as below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">thresholded_output_transform</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">output</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">y</span>

<span class="n">recall</span> <span class="o">=</span> <span class="n">Recall</span><span class="p">(</span><span class="n">output_transform</span><span class="o">=</span><span class="n">thresholded_output_transform</span><span class="p">)</span>
</pre></div>
</div>
<p>In multilabel cases, average parameter should be True. However, if user would like to compute F1 metric, for
example, average parameter should be False. This can be done as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">precision</span> <span class="o">=</span> <span class="n">Precision</span><span class="p">(</span><span class="n">average</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_multilabel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">recall</span> <span class="o">=</span> <span class="n">Recall</span><span class="p">(</span><span class="n">average</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_multilabel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">F1</span> <span class="o">=</span> <span class="n">precision</span> <span class="o">*</span> <span class="n">recall</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">precision</span> <span class="o">+</span> <span class="n">recall</span> <span class="o">+</span> <span class="mf">1e-20</span><span class="p">)</span>
<span class="n">F1</span> <span class="o">=</span> <span class="n">MetricsLambda</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">(),</span> <span class="n">F1</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In multilabel cases, if average is False, current implementation stores all input data (output and target) in
as tensors before computing a metric. This can potentially lead to a memory error if the input data is larger
than available RAM.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In multilabel cases, if average is False, current implementation does not work with distributed computations.
Results are not reduced across the GPUs. Computed result corresponds to the local rank’s (single GPU) result.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.</li>
<li><strong>average</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>optional</em>) – if True, precision is computed as the unweighted average (across all classes
in multiclass case), otherwise, returns a tensor with the precision (for each class in multiclass case).</li>
<li><strong>is_multilabel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>optional</em>) – parameter should be True and the average is computed across samples, instead of classes.</li>
<li><strong>device</strong> (<em>str of torch.device</em><em>, </em><em>optional</em>) – device specification in case of distributed computation usage.
In most of the cases, it can be defined as “cuda:local_rank” or “cuda”
if already set <cite>torch.cuda.set_device(local_rank)</cite>. By default, if a distributed process group is
initialized and available, device is set to <cite>cuda</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.RootMeanSquaredError">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">RootMeanSquaredError</code><span class="sig-paren">(</span><em>output_transform=&lt;function Metric.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/root_mean_squared_error.html#RootMeanSquaredError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.RootMeanSquaredError" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the root mean squared error.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form (y_pred, y) or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.RunningAverage">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">RunningAverage</code><span class="sig-paren">(</span><em>src=None</em>, <em>alpha=0.98</em>, <em>output_transform=None</em>, <em>epoch_bound=True</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/running_average.html#RunningAverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.RunningAverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute running average of a metric or the output of process function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>src</strong> (<a class="reference internal" href="#ignite.metrics.Metric" title="ignite.metrics.Metric"><em>Metric</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – input source: an instance of <a class="reference internal" href="#ignite.metrics.Metric" title="ignite.metrics.Metric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Metric</span></code></a> or None. The latter
corresponds to <cite>engine.state.output</cite> which holds the output of process function.</li>
<li><strong>alpha</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>, </em><em>optional</em>) – running average decay factor, default 0.98</li>
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a function to use to transform the output if <cite>src</cite> is None and
corresponds the output of process function. Otherwise it should be None.</li>
<li><strong>epoch_bound</strong> (<em>boolean</em><em>, </em><em>optional</em>) – whether the running average should be reset after each epoch (defaults
to True).</li>
<li><strong>device</strong> (<em>str of torch.device</em><em>, </em><em>optional</em>) – device specification in case of distributed computation usage.
This is necessary when running average is computed on the output of process function.
In most of the cases, it can be defined as “cuda:local_rank” or “cuda”
if already set <cite>torch.cuda.set_device(local_rank)</cite>. By default, if a distributed process group is
initialized and available, device is set to <cite>cuda</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.98</span>
<span class="n">acc_metric</span> <span class="o">=</span> <span class="n">RunningAverage</span><span class="p">(</span><span class="n">Accuracy</span><span class="p">(</span><span class="n">output_transform</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]]),</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">)</span>
<span class="n">acc_metric</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">trainer</span><span class="p">,</span> <span class="s1">&#39;running_avg_accuracy&#39;</span><span class="p">)</span>

<span class="n">avg_output</span> <span class="o">=</span> <span class="n">RunningAverage</span><span class="p">(</span><span class="n">output_transform</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">)</span>
<span class="n">avg_output</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">trainer</span><span class="p">,</span> <span class="s1">&#39;running_avg_loss&#39;</span><span class="p">)</span>

<span class="nd">@trainer</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">Events</span><span class="o">.</span><span class="n">ITERATION_COMPLETED</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">log_running_avg_metrics</span><span class="p">(</span><span class="n">engine</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;running avg accuracy:&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;running_avg_accuracy&#39;</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;running avg loss:&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;running_avg_loss&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.TopKCategoricalAccuracy">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">TopKCategoricalAccuracy</code><span class="sig-paren">(</span><em>k=5</em>, <em>output_transform=&lt;function TopKCategoricalAccuracy.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/top_k_categorical_accuracy.html#TopKCategoricalAccuracy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.TopKCategoricalAccuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the top-k categorical accuracy.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>(y_pred, y)</cite> or <cite>{‘y_pred’: y_pred, ‘y’: y}</cite>.</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="ignite.metrics.VariableAccumulation">
<em class="property">class </em><code class="descclassname">ignite.metrics.</code><code class="descname">VariableAccumulation</code><span class="sig-paren">(</span><em>op</em>, <em>output_transform=&lt;function VariableAccumulation.&lt;lambda&gt;&gt;</em>, <em>device=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ignite/metrics/accumulation.html#VariableAccumulation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ignite.metrics.VariableAccumulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Single variable accumulator helper to compute (arithmetic, geometric, harmonic) average of a single variable.</p>
<ul class="simple">
<li><cite>update</cite> must receive output of the form <cite>x</cite>.</li>
<li><cite>x</cite> can be a number or <cite>torch.Tensor</cite>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The class stores input into two public variables: <cite>accumulator</cite> and <cite>num_examples</cite>.
Number of samples is updated following the rule:</p>
<ul class="last simple">
<li><cite>+1</cite> if input is a number</li>
<li><cite>+1</cite> if input is a 1D <cite>torch.Tensor</cite></li>
<li><cite>+batch_size</cite> if input is a ND <cite>torch.Tensor</cite>. Batch size is the first dimension (<cite>shape[0]</cite>).</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>op</strong> (<em>callable</em>) – a callable to update accumulator. Method’s signature is <cite>(accumulator, output)</cite>.
For example, to compute arithmetic mean value, <cite>op = lambda a, x: a + x</cite>.</li>
<li><strong>output_transform</strong> (<em>callable</em><em>, </em><em>optional</em>) – a callable that is used to transform the
<a class="reference internal" href="engine.html#ignite.engine.Engine" title="ignite.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>’s <cite>process_function</cite>’s output into the
form expected by the metric. This can be useful if, for example, you have a multi-output model and
you want to compute the metric with respect to one of the outputs.</li>
<li><strong>device</strong> (<em>str of torch.device</em><em>, </em><em>optional</em>) – device specification in case of distributed computation usage.
In most of the cases, it can be defined as “cuda:local_rank” or “cuda”
if already set <cite>torch.cuda.set_device(local_rank)</cite>. By default, if a distributed process group is
initialized and available, device is set to <cite>cuda</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


             </article>
             
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="exceptions.html" class="btn btn-neutral float-right" title="ignite.exceptions" accesskey="n" rel="next">Next <img src="_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
        <a href="handlers.html" class="btn btn-neutral" title="ignite.handlers" accesskey="p" rel="prev"><img src="_static/images/chevron-right-orange.svg" class="previous-page"> Previous</a>
      
    </div>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Torch Contributors.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">ignite.metrics</a><ul>
<li><a class="reference internal" href="#metric-arithmetics">Metric arithmetics</a></li>
<li><a class="reference internal" href="#how-to-create-a-custom-metric">How to create a custom metric</a><ul>
<li><a class="reference internal" href="#metrics-and-distributed-computations">Metrics and distributed computations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#complete-list-of-metrics">Complete list of metrics</a></li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  

     
       <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
         <script type="text/javascript" src="_static/jquery.js"></script>
         <script type="text/javascript" src="_static/underscore.js"></script>
         <script type="text/javascript" src="_static/doctools.js"></script>
         <script type="text/javascript" src="_static/language_data.js"></script>
         <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
     

  

  <script type="text/javascript" src="_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="_static/js/vendor/bootstrap.min.js"></script>
  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->

  <!-- commented out for Ignite -->
  <!--

  <div class="container-fluid docs-tutorials-resources" id="docs-tutorials-resources">
    <div class="container">
      <div class="row">
        <div class="col-md-4 text-center">
          <h2>Docs</h2>
          <p>Access comprehensive developer documentation for PyTorch</p>
          <a class="with-right-arrow" href="https://pytorch.org/ignite/index.html">View Docs</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Tutorials</h2>
          <p>Get in-depth tutorials for beginners and advanced developers</p>
          <a class="with-right-arrow" href="">View Tutorials</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Resources</h2>
          <p>Find development resources and get your questions answered</p>
          <a class="with-right-arrow" href="">View Resources</a>
        </div>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="container footer-container">
      <div class="footer-logo-wrapper">
        <a href="https://pytorch.org/ignite/" class="footer-logo"></a>
      </div>

      <div class="footer-links-wrapper">
        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://pytorch.org/ignite/">PyTorch</a></li>
            <li><a href="https://pytorch.org/ignite/get-started">Get Started</a></li>
            <li><a href="">Features</a></li>
            <li><a href="">Ecosystem</a></li>
            <li><a href="">Blog</a></li>
            <li><a href="">Resources</a></li>
          </ul>
        </div>

        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="">Support</a></li>
            <li><a href="">Tutorials</a></li>
            <li><a href="https://pytorch.org/ignite/index.html">Docs</a></li>
            <li><a href="" target="_blank">Discuss</a></li>
            <li><a href="https://github.com/pytorch/ignite/issues" target="_blank">Github Issues</a></li>
            <li><a href="" target="_blank">Slack</a></li>
            <li><a href="https://github.com/pytorch/ignite/blob/master/CONTRIBUTING.md" target="_blank">Contributing</a></li>
          </ul>
        </div>

        <div class="footer-links-col follow-us-col">
          <ul>
            <li class="list-title">Follow Us</li>
            <li>
              <div id="mc_embed_signup">
                <form
                  action="https://twitter.us14.list-manage.com/subscribe/post?u=75419c71fe0a935e53dfa4a3f&id=91d0dccd39"
                  method="post"
                  id="mc-embedded-subscribe-form"
                  name="mc-embedded-subscribe-form"
                  class="email-subscribe-form validate"
                  target="_blank"
                  novalidate>
                  <div id="mc_embed_signup_scroll" class="email-subscribe-form-fields-wrapper">
                    <div class="mc-field-group">
                      <label for="mce-EMAIL" style="display:none;">Email Address</label>
                      <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address">
                    </div>

                    <div id="mce-responses" class="clear">
                      <div class="response" id="mce-error-response" style="display:none"></div>
                      <div class="response" id="mce-success-response" style="display:none"></div>
                    </div>    <!~~ real people should not fill this in and expect good things - do not remove this or risk form bot signups ~~>

                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_75419c71fe0a935e53dfa4a3f_91d0dccd39" tabindex="-1" value=""></div>

                    <div class="clear">
                      <input type="submit" value="" name="subscribe" id="mc-embedded-subscribe" class="button email-subscribe-button">
                    </div>
                  </div>
                </form>
              </div>

            </li>
          </ul>

          <div class="footer-social-icons">
            <a href="" target="_blank" class="facebook"></a>
            <a href="" target="_blank" class="twitter"></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  -->
  <!-- end of commented out for Ignite -->

  <div class="cookie-banner-wrapper">
  <div class="container">
    <p class="gdpr-notice">To analyze traffic and optimize your experience, we serve cookies on this site. By clicking or navigating, you agree to allow our usage of cookies. As the current maintainers of this site, Facebook’s Cookies Policy applies. Learn more, including about available controls: <a href="https://www.facebook.com/policies/cookies/">Cookies Policy</a>.</p>
    <img class="close-button" src="_static/images/pytorch-x.svg">
  </div>
</div>

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->
  <!--
  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://pytorch.org/ignite/" aria-label="PyTorch"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="#">Get Started</a>
          </li>

          <li>
            <a href="#">Features</a>
          </li>

          <li>
            <a href="#">Ecosystem</a>
          </li>

          <li>
            <a href="">Blog</a>
          </li>

          <li>
            <a href="">Tutorials</a>
          </li>

          <li>
            <a href="https://pytorch.org/ignite/index.html">Docs</a>
          </li>

          <li>
            <a href="">Resources</a>
          </li>

          <li>
            <a href="https://github.com/pytorch/ignite">Github</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  -->
  <!-- End Mobile Menu -->

  <script type="text/javascript" src="_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>